"use strict";var _slicedToArray=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,r=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done)&&(i.push(o.value),!e||i.length!==e);n=!0);}catch(t){r=!0,s=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw s}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};window.lineEvent={data:function(){return{localList:["10.88.110.89","10.88.110.62","10.127.105.69","10.127.105.74","127.0.0.1","localhost"],isInvalid:!0}},computed:{testMode:function(){return"event.franklin.com.tw"!=location.hostname},localMode:function(){return-1<this.localList.indexOf(location.hostname)},apiURL:function(){return this.testMode?"https://wt.franklin.com.tw":"https://event.franklin.com.tw"},idURL:function(){return this.testMode?"https://wt.franklin.com.tw:8081":"https://etrade.franklin.com.tw"},wfURL:function(){return this.testMode?"https://wt.franklin.com.tw":"https://www.franklin.com.tw"}},methods:{testLog:function(t,e){this.testMode&&console.log(t+":",e)},throwError:function(t,e){this.localMode?console.error(e):alert(t)},setPromise:function(t,n,r){return new Promise(function(e,i){$.ajax({type:t,dataType:"json",url:n,data:r,success:function(t){e(t)},error:function(t){i(t)}})})},checkParams:function(t,e){var i=this;if(void 0===e&&(e=null),this.localMode)this.getQueryParams().t&&(this.config.t=this.getQueryParams().t),this.getQueryParams().uid&&(this.config.uid=this.getQueryParams().uid),this.getQueryParams().hash&&(this.config.hash=this.getQueryParams().hash),e&&e();else{var n=!!sessionStorage.getItem(t),r=null!=this.getQueryParams().t&&null!=this.getQueryParams().uid&&null!=this.getQueryParams().hash,s="";if(Object.keys(this.getQueryurlParams()).forEach(function(t,e){["t","uid","hash"].indexOf(t)<0&&(s+="&"+t+"="+i.getQueryParams()[t])}),s=s.replace("&","?"),this.testMode&&console.log("isSession:",n,"hasAllparams:",r),r&&!n){var o={t:this.getQueryParams().t,uid:this.getQueryParams().uid,hash:this.getQueryParams().hash};return sessionStorage.setItem(t,JSON.stringify(o)),void(location.href=location.origin+location.pathname+s)}if(r&&n)return void(location.href=location.origin+location.pathname+s);if(!r&&!n)return void(location.href=this.event_url);if(!r&&n){this.isInvalid=!1;var a=JSON.parse(sessionStorage.getItem(t));this.config.t=a.t,this.config.uid=a.uid,this.config.hash=a.hash,e&&e()}}},getQueryurlParams:function(){for(var t={},e=window.location.search.substring(1).split("&"),i=0;i<e.length;i++){var n=e[i].split("=");if(void 0===t[n[0]])t[n[0]]=n[1];else if("string"==typeof t[n[0]]){var r=[t[n[0]],n[1]];t[n[0]]=r}else t[n[0]].push(n[1])}return t},resetParams:function(t){return Object.entries(t).map(function(t){var e=_slicedToArray(t,2);return e[0]+"="+e[1]}).join("&")},getQueryParams:function(t){var e=t||location.search;e=e.split("+").join(" ");for(var i,n={},r=/[?&]?([^=]+)=([^&]*)/g;i=r.exec(e);)n[decodeURIComponent(i[1])]=decodeURIComponent(i[2]);return n},getLineVerify:function(t){return this.setPromise("GET",this.apiURL+"/LineAPI/api/verify",t)},getLineInfo:function(t){return this.setPromise("GET",this.apiURL+"/LineAPI/api/Analysis",t)},getBinded:function(t){return this.setPromise("GET",this.wfURL+"/FAPI/api/SocialInfo",t)},getBinded_2:function(t){var e=this.resetParams(t);return e&&(e="?"+e),this.setPromise("POST",this.wfURL+"/FAPI/api/SocialInfo"+e,null)},getBCstatus:function(t){return this.setPromise("POST",this.idURL+"/Join/ECStatus",t)},getLinePoint:function(t){return this.setPromise("GET","https://event.franklin.com.tw/LineAPI/api/PointConnect",t)},getWomanBooking:function(t){return this.setPromise("GET",this.wfURL+"/LineAPI/api/CalendarBooking",t)},setWomanBooking:function(t){return this.setPromise("POST",this.wfURL+"/LineAPI/api/CalendarBooking",t)},setDiscount:function(t,e){return this.setPromise("POST",this.idURL+"/Join/Send/"+t,e)},setLineTagging:function(t){return this.setPromise("POST",this.apiURL+"/LineAPI/api/Analysis",t)},setQuestionnaire:function(t){return this.setPromise("POST",this.wfURL+"/FAPI/WF13/AllOther",t)},setWF09:function(t){return this.setPromise("POST",this.wfURL+"/FAPI/WF09/LineEvent",t)},setQuestionWF09:function(t){return this.setPromise("POST",this.wfURL+"/FAPI/wf09/LineEventForm",t)},setBasicWF09:function(t){return this.setPromise("POST",this.wfURL+"/FAPI/WF09/UserFormAPI",t)},setNewWF09:function(t){return this.setPromise("POST",this.wfURL+"/FAPI/EventForm/UserFormAPI",t)}}};